# Copyright (c) 2024 ROS2 OpenHarmony Port Project
# visualization_msgs - ROS2 visualization message types

import("//build/ohos.gni")
import("//gn_templates/ros2_library.gni")

_package_name = "visualization_msgs"

# ============================================================================
# visualization_msgs message types:
#
# Basic Markers:
#   Marker - Single visualization marker (cube, sphere, arrow, etc.)
#   MarkerArray - Collection of markers
#   ImageMarker - Marker for image overlay
#
# Interactive Markers:
#   InteractiveMarker - 3D interactive marker
#   InteractiveMarkerControl - Control element for interactive markers
#   InteractiveMarkerFeedback - User interaction feedback
#   InteractiveMarkerInit - Initial state message
#   InteractiveMarkerPose - Pose update message
#   InteractiveMarkerUpdate - Update message
#   MenuEntry - Context menu entry
#
# Utilities:
#   UVCoordinate - Texture UV coordinate
#   MeshFile - Reference to mesh file
#
# Services:
#   GetInteractiveMarkers - Get current interactive markers
# ============================================================================

# ============================================================================
# visualization_msgs C generator library
# ============================================================================
ros2_shared_library("visualization_msgs__rosidl_generator_c") {
  sources = [
    # Basic marker types
    "src/msg/marker__functions.c",
    "src/msg/marker_array__functions.c",
    "src/msg/image_marker__functions.c",

    # Utility types
    "src/msg/uv_coordinate__functions.c",
    "src/msg/mesh_file__functions.c",
    "src/msg/menu_entry__functions.c",

    # Interactive marker types
    "src/msg/interactive_marker__functions.c",
    "src/msg/interactive_marker_control__functions.c",
    "src/msg/interactive_marker_feedback__functions.c",
    "src/msg/interactive_marker_init__functions.c",
    "src/msg/interactive_marker_pose__functions.c",
    "src/msg/interactive_marker_update__functions.c",

    # Service types
    "src/srv/get_interactive_markers__request__functions.c",
    "src/srv/get_interactive_markers__response__functions.c",
  ]

  include_dirs = [ "include" ]

  deps = [
    "//foundation/rcutils:rcutils",
    "//foundation/rosidl/rosidl_runtime_c:rosidl_runtime_c",
    "//interfaces/builtin_interfaces:builtin_interfaces__rosidl_generator_c",
    "//interfaces/std_msgs:std_msgs__rosidl_generator_c",
    "//interfaces/geometry_msgs:geometry_msgs__rosidl_generator_c",
    "//interfaces/sensor_msgs:sensor_msgs__rosidl_generator_c",
  ]

  defines = [ "ROSIDL_GENERATOR_C_BUILDING_DLL_${_package_name}" ]

  part_name = "ros2_foundation"
  subsystem_name = "ros2"
}

# ============================================================================
# visualization_msgs type support C library
# ============================================================================
ros2_shared_library("visualization_msgs__rosidl_typesupport_c") {
  sources = [
    # Basic marker types
    "src/msg/marker__type_support.c",
    "src/msg/marker_array__type_support.c",
    "src/msg/image_marker__type_support.c",

    # Utility types
    "src/msg/uv_coordinate__type_support.c",
    "src/msg/mesh_file__type_support.c",
    "src/msg/menu_entry__type_support.c",

    # Interactive marker types
    "src/msg/interactive_marker__type_support.c",
    "src/msg/interactive_marker_control__type_support.c",
    "src/msg/interactive_marker_feedback__type_support.c",
    "src/msg/interactive_marker_init__type_support.c",
    "src/msg/interactive_marker_pose__type_support.c",
    "src/msg/interactive_marker_update__type_support.c",

    # Service types
    "src/srv/get_interactive_markers__request__type_support.c",
    "src/srv/get_interactive_markers__response__type_support.c",
  ]

  include_dirs = [ "include" ]

  deps = [
    ":visualization_msgs__rosidl_generator_c",
    "//foundation/rcutils:rcutils",
    "//foundation/rosidl/rosidl_runtime_c:rosidl_runtime_c",
    "//foundation/rosidl/rosidl_typesupport_c:rosidl_typesupport_c",
    "//foundation/rosidl/rosidl_typesupport_introspection_c:rosidl_typesupport_introspection_c",
    "//interfaces/builtin_interfaces:builtin_interfaces__rosidl_typesupport_c",
    "//interfaces/std_msgs:std_msgs__rosidl_typesupport_c",
    "//interfaces/geometry_msgs:geometry_msgs__rosidl_typesupport_c",
    "//interfaces/sensor_msgs:sensor_msgs__rosidl_typesupport_c",
  ]

  defines = [ "ROSIDL_TYPESUPPORT_C_BUILDING_DLL" ]

  part_name = "ros2_foundation"
  subsystem_name = "ros2"
}

# ============================================================================
# visualization_msgs FastRTPS type support
# ============================================================================
ros2_shared_library("visualization_msgs__rosidl_typesupport_fastrtps_c") {
  sources = [
    "src/msg/marker__rosidl_typesupport_fastrtps_c.cpp",
    "src/msg/marker_array__rosidl_typesupport_fastrtps_c.cpp",
    "src/msg/interactive_marker__rosidl_typesupport_fastrtps_c.cpp",
    "src/msg/interactive_marker_feedback__rosidl_typesupport_fastrtps_c.cpp",
    "src/msg/interactive_marker_update__rosidl_typesupport_fastrtps_c.cpp",
  ]

  include_dirs = [ "include" ]

  deps = [
    ":visualization_msgs__rosidl_generator_c",
    "//foundation/rcutils:rcutils",
    "//foundation/rosidl/rosidl_runtime_c:rosidl_runtime_c",
    "//foundation/rosidl/rosidl_typesupport_fastrtps_c:rosidl_typesupport_fastrtps_c",
    "//vendor/fastdds/fastcdr:fastcdr",
    "//interfaces/builtin_interfaces:builtin_interfaces__rosidl_typesupport_fastrtps_c",
    "//interfaces/std_msgs:std_msgs__rosidl_typesupport_fastrtps_c",
    "//interfaces/geometry_msgs:geometry_msgs__rosidl_typesupport_fastrtps_c",
    "//interfaces/sensor_msgs:sensor_msgs__rosidl_typesupport_fastrtps_c",
  ]

  defines = [ "ROSIDL_TYPESUPPORT_FASTRTPS_C_BUILDING_DLL_${_package_name}" ]

  cflags_cc = [ "-Wno-unused-parameter" ]

  part_name = "ros2_foundation"
  subsystem_name = "ros2"
}

# ============================================================================
# visualization_msgs C++ type support
# ============================================================================
config("visualization_msgs_cpp_config") {
  include_dirs = [ "include" ]
}

ros2_shared_library("visualization_msgs__rosidl_typesupport_cpp") {
  sources = [
    "src/msg/marker__type_support.cpp",
    "src/msg/marker_array__type_support.cpp",
    "src/msg/image_marker__type_support.cpp",
    "src/msg/uv_coordinate__type_support.cpp",
    "src/msg/mesh_file__type_support.cpp",
    "src/msg/menu_entry__type_support.cpp",
    "src/msg/interactive_marker__type_support.cpp",
    "src/msg/interactive_marker_control__type_support.cpp",
    "src/msg/interactive_marker_feedback__type_support.cpp",
    "src/msg/interactive_marker_init__type_support.cpp",
    "src/msg/interactive_marker_pose__type_support.cpp",
    "src/msg/interactive_marker_update__type_support.cpp",
    "src/srv/get_interactive_markers__request__type_support.cpp",
    "src/srv/get_interactive_markers__response__type_support.cpp",
  ]

  include_dirs = [ "include" ]

  deps = [
    ":visualization_msgs__rosidl_generator_c",
    "//foundation/rosidl/rosidl_runtime_cpp:rosidl_runtime_cpp",
    "//foundation/rosidl/rosidl_typesupport_cpp:rosidl_typesupport_cpp",
    "//foundation/rosidl/rosidl_typesupport_introspection_cpp:rosidl_typesupport_introspection_cpp",
    "//interfaces/builtin_interfaces:builtin_interfaces__rosidl_typesupport_cpp",
    "//interfaces/std_msgs:std_msgs__rosidl_typesupport_cpp",
    "//interfaces/geometry_msgs:geometry_msgs__rosidl_typesupport_cpp",
    "//interfaces/sensor_msgs:sensor_msgs__rosidl_typesupport_cpp",
  ]

  defines = [ "ROSIDL_TYPESUPPORT_CPP_BUILDING_DLL" ]

  part_name = "ros2_foundation"
  subsystem_name = "ros2"
}

# ============================================================================
# Package group target
# ============================================================================
group("visualization_msgs") {
  public_deps = [
    ":visualization_msgs__rosidl_generator_c",
    ":visualization_msgs__rosidl_typesupport_c",
    ":visualization_msgs__rosidl_typesupport_cpp",
    ":visualization_msgs__rosidl_typesupport_fastrtps_c",
  ]

  public_configs = [ ":visualization_msgs_cpp_config" ]
}
